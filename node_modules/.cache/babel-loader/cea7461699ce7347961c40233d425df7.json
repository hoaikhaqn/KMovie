{"ast":null,"code":"import _slicedToArray from \"/home/h/Source/Project/movie-website/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/h/Source/Project/movie-website/src/views/MoviePlay/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useReduceState } from \"../../context\";\nimport \"./style.css\";\nimport $ from \"jquery\"; // import data from \"../../api/data.json\";\n// Components\n\nimport Loading from \"../../containers/DefaultLayout/DefaultLoading\";\nimport Breadcrumbs from \"../../containers/DefaultLayout/DefaultBreadcrumbs\";\nimport SideBar from \"../../components/Sidebar\";\nimport Comments from \"../../components/Comments\";\nimport ServerList from \"./ServerList\"; // var _ = require('lodash');\n\nexport default function WatchMoviePage(props) {\n  const _useState = useState({\n    sv: 0,\n    ep: 0\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        curentEp = _useState2[0],\n        setCurentEp = _useState2[1];\n\n  const _useReduceState = useReduceState(),\n        state = _useReduceState.state,\n        getMovieById = _useReduceState.getMovieById;\n\n  const _useState3 = useState(),\n        _useState4 = _slicedToArray(_useState3, 2),\n        movieItem = _useState4[0],\n        setMovieItem = _useState4[1];\n\n  var loaded = true;\n\n  if (!state.data || state.data && !state.data.item || state.data.item && props.match.params.id !== state.data.item.id) {\n    loaded = false;\n    getMovieById(props.match.params.id, () => {\n      loaded = false;\n    });\n  }\n\n  useEffect(() => {\n    setMovieItem(state.data && state.data.item);\n    $('#catmenu li.active').addClass('open').children('ul').show();\n    $('#catmenu li.has-sub>a').on('click', function () {\n      $(this).removeAttr('href');\n      var element = $(this).parent('li');\n\n      if (element.hasClass('open')) {\n        element.removeClass('open');\n        element.find('li').removeClass('open');\n        element.find('ul').slideUp(200);\n      } else {\n        element.addClass('open');\n        element.children('ul').slideDown(200);\n        element.siblings('li').children('ul').slideUp(200);\n        element.siblings('li').removeClass('open');\n        element.siblings('li').find('li').removeClass('open');\n        element.siblings('li').find('ul').slideUp(200);\n      }\n    });\n\n    if (movieItem) {\n      console.log(\"HELLO ỬOLD\");\n      var xhr = new XMLHttpRequest();\n      xhr.responseType = 'blob';\n\n      xhr.onload = function () {\n        var reader = new FileReader();\n\n        reader.onloadend = function () {\n          var byteCharacters = atob(reader.result.slice(reader.result.indexOf(',') + 1));\n          var byteNumbers = new Array(byteCharacters.length);\n\n          for (var i = 0; i < byteCharacters.length; i++) {\n            byteNumbers[i] = byteCharacters.charCodeAt(i);\n          }\n\n          var byteArray = new Uint8Array(byteNumbers);\n          var blob = new Blob([byteArray], {\n            type: 'video/ogg'\n          });\n          var url = URL.createObjectURL(blob); // document.getElementById('_video').src = url;\n\n          console.log(\"URL\", url);\n        };\n\n        reader.readAsDataURL(xhr.response);\n      };\n\n      xhr.open('GET', movieItem.server[0].ep[0].link);\n      xhr.send();\n    }\n  }, [state.data]);\n  return movieItem && loaded ? React.createElement(\"div\", {\n    id: \"WatchMoviePage\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(Breadcrumbs, {\n    items: [{\n      url: \"/movie/\" + movieItem.id,\n      label: movieItem.name\n    }, \"Watch movie\"],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"zmoto-inner-page\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"zmovo-blog-details pt-30\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"zmovo-blog-contents\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"zmovo-product-with-sedbar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-9\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"zmovo-blog-dec-contents\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"zmovo-video-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"video\", {\n    id: \"zmovo-movie\",\n    controls: true,\n    src: movieItem.server[curentEp.sv][\"ep\"][curentEp.ep].link,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  })), React.createElement(ServerList, {\n    data: movieItem.server,\n    setCurentEp: setCurentEp,\n    curentEp: curentEp,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), React.createElement(Comments, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"col-lg-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(SideBar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }))))))))))) : React.createElement(Loading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  });\n}","map":{"version":3,"sources":["/home/h/Source/Project/movie-website/src/views/MoviePlay/index.js"],"names":["React","useEffect","useState","useReduceState","$","Loading","Breadcrumbs","SideBar","Comments","ServerList","WatchMoviePage","props","sv","ep","curentEp","setCurentEp","state","getMovieById","movieItem","setMovieItem","loaded","data","item","match","params","id","addClass","children","show","on","removeAttr","element","parent","hasClass","removeClass","find","slideUp","slideDown","siblings","console","log","xhr","XMLHttpRequest","responseType","onload","reader","FileReader","onloadend","byteCharacters","atob","result","slice","indexOf","byteNumbers","Array","length","i","charCodeAt","byteArray","Uint8Array","blob","Blob","type","url","URL","createObjectURL","readAsDataURL","response","open","server","link","send","label","name"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useReduceState } from \"../../context\";\nimport \"./style.css\";\nimport $ from \"jquery\";\n// import data from \"../../api/data.json\";\n\n// Components\nimport Loading from \"../../containers/DefaultLayout/DefaultLoading\";\nimport Breadcrumbs from \"../../containers/DefaultLayout/DefaultBreadcrumbs\";\nimport SideBar from \"../../components/Sidebar\";\nimport Comments from \"../../components/Comments\";\nimport ServerList from \"./ServerList\";\n\n// var _ = require('lodash');\nexport default function WatchMoviePage(props) {\n    const [curentEp, setCurentEp] = useState({ sv: 0, ep: 0 });\n    const { state, getMovieById } = useReduceState();\n    const [movieItem, setMovieItem] = useState();\n    var loaded = true;\n    if (!state.data || (state.data && !state.data.item) || (state.data.item && props.match.params.id !== state.data.item.id)) {\n        loaded = false\n        getMovieById(props.match.params.id, () => { loaded = false });\n    }\n    useEffect(() => {\n        setMovieItem(state.data && state.data.item)\n        $('#catmenu li.active').addClass('open').children('ul').show();\n        $('#catmenu li.has-sub>a').on('click', function () {\n            $(this).removeAttr('href');\n            var element = $(this).parent('li');\n            if (element.hasClass('open')) {\n                element.removeClass('open');\n                element.find('li').removeClass('open');\n                element.find('ul').slideUp(200);\n            } else {\n                element.addClass('open');\n                element.children('ul').slideDown(200);\n                element.siblings('li').children('ul').slideUp(200);\n                element.siblings('li').removeClass('open');\n                element.siblings('li').find('li').removeClass('open');\n                element.siblings('li').find('ul').slideUp(200);\n            }\n        });\n        if (movieItem) {\n            console.log(\"HELLO ỬOLD\")\n            var xhr = new XMLHttpRequest();\n            xhr.responseType = 'blob';\n            xhr.onload = function () {\n                var reader = new FileReader();\n                reader.onloadend = function () {\n                    var byteCharacters = atob(reader.result.slice(reader.result.indexOf(',') + 1));\n                    var byteNumbers = new Array(byteCharacters.length);\n                    for (var i = 0; i < byteCharacters.length; i++) {\n                        byteNumbers[i] = byteCharacters.charCodeAt(i);\n                    }\n                    var byteArray = new Uint8Array(byteNumbers);\n                    var blob = new Blob([byteArray], { type: 'video/ogg' });\n                    var url = URL.createObjectURL(blob);\n                    // document.getElementById('_video').src = url;\n                    console.log(\"URL\",url)\n                }\n                reader.readAsDataURL(xhr.response);\n            };\n            xhr.open('GET',movieItem.server[0].ep[0].link);\n            xhr.send();\n        }\n\n    }, [state.data]);\n    return movieItem && loaded ? (\n        <div id=\"WatchMoviePage\">\n            {/* <!-- breadcroumb-area --> */}\n            <Breadcrumbs items={[{ url: \"/movie/\" + movieItem.id, label: movieItem.name }, \"Watch movie\"]} />\n            {/* <!-- End breadcroumb-area --> */}\n            <div className=\"zmoto-inner-page\">\n                <div className=\"zmovo-blog-details pt-30\">\n                    <div className=\"container\">\n                        <div className=\"zmovo-blog-contents\">\n                            <div className=\"row\">\n                                <div className=\"col-12\">\n                                    <div className=\"zmovo-product-with-sedbar\">\n                                        <div className=\"row\">\n                                            {/* <!-- Left --> */}\n                                            <div className=\"col-lg-9\">\n                                                <div className=\"zmovo-blog-dec-contents\">\n                                                    <div className=\"zmovo-video-container\">\n                                                        <video id=\"zmovo-movie\" controls src={movieItem.server[curentEp.sv][\"ep\"][curentEp.ep].link}></video>\n                                                    </div>\n                                                    <ServerList data={movieItem.server} setCurentEp={setCurentEp} curentEp={curentEp} />\n                                                    <Comments />\n                                                </div>\n                                            </div>\n                                            {/* <!-- End Left --> */}\n                                            {/* <!-- Right --> */}\n                                            <div className=\"col-lg-3\">\n                                                <SideBar />\n                                            </div>\n                                            {/* <!-- End Right --> */}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    ) : <Loading />;\n}\n\n"]},"metadata":{},"sourceType":"module"}