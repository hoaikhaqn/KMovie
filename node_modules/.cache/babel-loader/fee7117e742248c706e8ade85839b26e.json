{"ast":null,"code":"import _defineProperty from \"/home/h/Source/Project/movie-website/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/home/h/Source/Project/movie-website/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/h/Source/Project/movie-website/src/context/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { createContext, useContext, useReducer } from \"react\";\nimport { initialState, mainReducer } from \"./reducers\";\nconst StateContext = createContext();\nexport const StateProvider = props => {\n  const _useReducer = useReducer(mainReducer, initialState),\n        _useReducer2 = _slicedToArray(_useReducer, 2),\n        state = _useReducer2[0],\n        dispatch = _useReducer2[1];\n\n  const distinct = (value, index, self) => {\n    return self.indexOf(value) === index;\n  };\n\n  const getMovieById = (id, cb) => {\n    firebase.getMovieItem(id).then(rs => {\n      dispatch({\n        type: \"GET_MOVIE_ITEM\",\n        data: {\n          item: _objectSpread({}, rs.data(), {\n            id: rs.id\n          })\n        }\n      });\n      cb();\n    });\n  };\n\n  const getMovies = (key, params) => {\n    var ListMovie = [];\n    var obj = {};\n    firebase.getData(\"movie\", params).then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        ListMovie.push(_objectSpread({}, doc.data(), {\n          id: doc.id\n        }));\n      });\n      obj[key] = ListMovie;\n      dispatch({\n        type: \"GET_MOVIES\",\n        data: _objectSpread({}, obj)\n      });\n    });\n  };\n\n  const getCategory = (key, params) => {\n    var aData = [];\n    var objData = {};\n    firebase.getData(\"movie\", params).then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        console.log(aData);\n        console.log(things.findIndex(i => i.item === \"chips\"));\n        if (aData.indexOf(doc.data().category)) aData.push(doc.data().category);\n      });\n      objData[key] = aData;\n      dispatch({\n        type: \"GET_MOVIES\",\n        data: _objectSpread({}, objData)\n      });\n    });\n  };\n\n  const setMovieItem = (id, data) => {\n    firebase.setMovieItem(id, data);\n  };\n\n  const value = {\n    state,\n    dispatch,\n    firebase,\n    getMovieById,\n    getMovies,\n    getCategory,\n    setMovieItem\n  };\n  return React.createElement(StateContext.Provider, {\n    value: value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, props.children);\n};\nexport const useReduceState = () => useContext(StateContext);\nexport const firebase = require(\"./firebase\").default;","map":{"version":3,"sources":["/home/h/Source/Project/movie-website/src/context/index.js"],"names":["React","createContext","useContext","useReducer","initialState","mainReducer","StateContext","StateProvider","props","state","dispatch","distinct","value","index","self","indexOf","getMovieById","id","cb","firebase","getMovieItem","then","rs","type","data","item","getMovies","key","params","ListMovie","obj","getData","querySnapshot","forEach","doc","push","getCategory","aData","objData","console","log","things","findIndex","i","category","setMovieItem","children","useReduceState","require","default"],"mappings":"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","sourcesContent":["import React, { createContext, useContext, useReducer } from \"react\";\nimport { initialState, mainReducer } from \"./reducers\";\nconst StateContext = createContext();\nexport const StateProvider = props => {\n  const [state, dispatch] = useReducer(mainReducer, initialState);\n\n  const distinct = (value,index,self) =>{\n    return self.indexOf(value) === index;\n  }\n  const getMovieById = (id,cb) => {\n    firebase.getMovieItem(id).then(rs => {\n      dispatch({ type: \"GET_MOVIE_ITEM\", data: {item:{...rs.data(),id:rs.id} }});\n      cb();\n    });\n  };\n  const getMovies = (key,params) => {\n    var ListMovie = [];var obj = {}\n    firebase.getData(\"movie\",params).then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        ListMovie.push({ ...doc.data(), id: doc.id })\n      });\n      obj[key] = ListMovie;\n      dispatch({ type: \"GET_MOVIES\", data: {...obj} });\n    });\n  };\n  const getCategory = (key,params) => {\n    var aData = [];var objData = {}\n    firebase.getData(\"movie\",params).then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        console.log(aData);\n        \n        console.log(things.findIndex(i => i.item === \"chips\"));\n        \n        if(aData.indexOf(doc.data().category))\n        aData.push(doc.data().category)\n      });\n      objData[key] = aData;\n      dispatch({ type: \"GET_MOVIES\", data: {...objData} });\n    });\n  };\n  const setMovieItem = (id,data) => {\n    firebase.setMovieItem(id,data);\n  };\n  const value = {\n    state,\n    dispatch,\n    firebase,\n    getMovieById,\n    getMovies,\n    getCategory,\n    setMovieItem\n  };\n\n  return <StateContext.Provider value={value}>{props.children}</StateContext.Provider>;\n};\nexport const useReduceState = () => useContext(StateContext);\n\nexport const firebase = require(\"./firebase\").default;\n"]},"metadata":{},"sourceType":"module"}